<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="benProj.Views.CoursPage"
             xmlns:models="clr-namespace:benProj.Models"
             xmlns:viewmodels="clr-namespace:benProj.ViewModels"
             
             Title="CoursPage">
    <VerticalStackLayout>
        <Label
            HorizontalOptions="Center"
            Text="עמוד אימונים"
            VerticalOptions="Center" />
        
    <CollectionView ItemsSource="{Binding Courses}">
          
                <CollectionView.EmptyView>
                    <Label HorizontalTextAlignment="Center" Text="אין ריצות." />
                </CollectionView.EmptyView>

                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:Cours">
                        <Border StrokeThickness="1" >
                            <StackLayout Margin="2" BackgroundColor="White">
                                <Label
                                
                                HorizontalTextAlignment="Center"
                                FontAttributes="Bold" 
                                Text="{Binding CourseName}" 
                                TextDecorations="Underline"  />


                            <Label Text="{Binding Distance}" HorizontalTextAlignment="Start" TextColor="blue"/>
                                <Grid ColumnDefinitions="*,*,*,*"
                                      RowDefinitions="*,*,*">
                                    <Ellipse
                                    Grid.Column="0"
                                    Fill="{StaticResource BenPrimary }"
                                    HeightRequest="40"
                                    VerticalOptions="Center"
                                    WidthRequest="40" />
                                <Label
                                    FontSize="20"
                                    HorizontalOptions="Center"
                                    VerticalOptions="Center"
                                    Text="{Binding Difficulty}"
                                    TextColor="White"
                                     />
                            </Grid>

                                <Button
                                BackgroundColor="Red"
                                Command="{Binding DeleteItemCommand, Source={x:RelativeSource AncestorType={x:Type viewmodels:CoursViewModel}, Mode=FindAncestorBindingContext}}"
                                CommandParameter="{Binding .}"
                                HorizontalOptions="Start"
                                Text="מחיקת הריצה"
                                TextColor="White"
                                WidthRequest="200" />
                            </StackLayout>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        <Entry Placeholder="שם ריצה" Text="{Binding CourseName}" />
        <Entry Placeholder="מרחק" Text="{Binding CourseDistance}" />
        <Entry Placeholder="רמת קושי" Text="{Binding CourseDifficulty}" />
        <Button
        BackgroundColor="Green"
        Command="{Binding AddCourseCommand}"
        HorizontalOptions="Center"
        Text="הוספת ריצה"
        TextColor="White"
        WidthRequest="200" />

    </VerticalStackLayout>
</ContentPage>